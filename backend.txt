from flask import Flask, request, jsonify
from flask_cors import CORS
import sqlite3

app = Flask(__name__)
CORS(app)  # Allow frontend to connect

# --- Database Setup ---
def init_db():
    conn = sqlite3.connect("canteen.db")
    c = conn.cursor()
    c.execute('''CREATE TABLE IF NOT EXISTS orders (
                    id INTEGER PRIMARY KEY AUTOINCREMENT,
                    student_id TEXT,
                    name TEXT,
                    items TEXT,
                    total REAL
                )''')
    conn.commit()
    conn.close()

init_db()


# --- API Routes ---

@app.route("/order", methods=["POST"])
def place_order():
    data = request.json
    student_id = data.get("student_id")
    name = data.get("name")
    items = data.get("items")
    total = data.get("total")

    conn = sqlite3.connect("canteen.db")
    c = conn.cursor()
    c.execute("INSERT INTO orders (student_id, name, items, total) VALUES (?, ?, ?, ?)",
              (student_id, name, str(items), total))
    conn.commit()
    conn.close()

    return jsonify({"message": "Order placed successfully!"}), 201


@app.route("/orders", methods=["GET"])
def get_orders():
    conn = sqlite3.connect("canteen.db")
    c = conn.cursor()
    c.execute("SELECT * FROM orders ORDER BY id DESC")
    rows = c.fetchall()
    conn.close()

    orders = []
    for row in rows:
        orders.append({
            "id": row[0],
            "student_id": row[1],
            "name": row[2],
            "items": row[3],
            "total": row[4]
        })
    return jsonify(orders)


if __name__ == "__main__":
    app.run(debug=True)
backend code ( app.py ) üëÜüèª


library:
pip install flask flask-cors